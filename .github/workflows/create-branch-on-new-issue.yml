name: Create branch on new issue

run-name: ${{ github.actor }} has created a new issue, a branch is being created ðŸš€

on: 
  issues:
    types: 
      - opened
    
jobs:
  create-branch:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4
      - name: Create Branch
        run: |
          ISSUE_NUMBER=$(jq -r ".issue.number" $GITHUB_EVENT_PATH)
          ISSUE_TITLE=$(jq -r ".issue.title" $GITHUB_EVENT_PATH)
          SLUGIFIED_TITLE=$(echo "$ISSUE_TITLE" | tr ' ' '-' | awk '{print tolower($0)}')
          BRANCH_NAME="$ISSUE_NUMBER-$SLUGIFIED_TITLE"
          echo "Branch $BRANCH_NAME will be automatically created"
          git checkout -b "$BRANCH_NAME"
          git push origin "$BRANCH_NAME"
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}